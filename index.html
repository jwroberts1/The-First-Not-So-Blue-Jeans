<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Creator of a Pirate Legend Quiz</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }

        .question-option {
            transition: all 0.2s;
            cursor: pointer;
        }

        .question-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .question-option.selected {
            background-color: #e0f2fe;
            border-left: 4px solid #3b82f6;
        }

        .question-option.correct-answer {
            background-color: #dcfce7;
            border-left: 4px solid #10b981;
        }

        .question-option.incorrect-answer {
            background-color: #fee2e2;
            border-left: 4px solid #ef4444;
        }

        /* Custom styles for the game */
        #game-canvas {
            background-color: #1a1a2e;
            /* Dark, moody background */
            border: 2px solid #5d5d81;
            box-shadow: 0 0 20px #5d5d81;
            cursor: pointer;
        }
    </style>
</head>

<body class="p-4 sm:p-8">
    <div class="max-w-4xl mx-auto bg-white shadow-xl rounded-lg p-6 sm:p-10 mb-8">
        <h1 class="text-3xl sm:text-4xl font-bold text-center text-gray-800 mb-6">The Creator of a Pirate Legend</h1>
        <p class="text-gray-600 text-center mb-8">Read the passage. Then answer the questions.</p>

        <!-- Quiz Section -->
        <div id="quiz-container">
            <!-- Timer Display -->
            <div class="text-center font-semibold text-xl text-gray-700 mb-6">
                Time: <span id="timer-display">0:00</span>
            </div>
            <div id="passage"
                class="bg-gray-50 rounded-lg p-6 mb-10 text-gray-700 leading-relaxed text-sm sm:text-base border border-gray-200">
                <h2 class="text-xl sm:text-2xl font-semibold mb-4">Passage:</h2>
                <p class="mb-4">Most of us can only dream about becoming a famous artist, but Eiichiro Oda made his dream come
                    true. He is known around the world for creating the manga and anime series *One Piece*. His story shows
                    how hard work, dedication, and a big imagination can lead to incredible adventures.</p>

                <p class="mb-4">Oda began drawing from a very young age, inspired by the cartoons and stories he loved. When he
                    was a teenager, he started working as an assistant for famous manga artists. It was a tough job with
                    long hours, but it was like a secret training camp for him. He learned how to draw characters, create
                    detailed backgrounds, and tell a story that would keep people interested for a long time. These skills
                    were very important later on when he created his own world for *One Piece*.</p>

                <p class="mb-4">Once *One Piece* was a huge hit, Oda's work didn't stop. In fact, it got even more demanding.
                    He works incredibly hard, often spending long hours in his studio, only taking short breaks. Some
                    people say he only sleeps for a few hours a night! This is because he is very dedicated to his fans. He
                    wants to make sure every chapter is perfect and full of surprises. He has a team of assistants who help
                    him, but he draws all the main characters himself. He believes it's important for his own hand to bring
                    the characters to life, making their expressions and actions just right.</p>

                <p class="mb-4">One of the most amazing things about Oda is how he plans out his story. He has the entire
                    plot of *One Piece* planned years in advance, with all the big twists and turns already written down.
                    This is why the story is so complex and exciting. He has notebooks filled with ideas, designs for new
                    characters, and maps of new islands. He knows the ending of the story, but he has promised his readers
                    that they will have to wait patiently for the final chapter.</p>

                <p class="mb-4">Oda's studio is a place full of wonder. It is not just a room with a desk; it's a creative
                    playground. There are drawings everywhere, action figures of his characters, and stacks of his favorite
                    comic books. He often listens to music while he draws to get into the right mood. Even though he is one
                    of the most famous artists in the world, he stays humble and loves to talk about his favorite movies and
                    TV shows. He is just a person who loves to tell stories, and his passion shines through in every page
                    of *One Piece*.</p>

                <p class="mb-4">His success with *One Piece* has shown millions of people that dreams are worth working for.
                    He is a living example of what can happen when you dedicate your life to something you love. His
                    creativity has inspired people of all ages to draw, read, and imagine their own incredible worlds.</p>
            </div>

            <div id="questions-container" class="space-y-10">
                <!-- Questions will be dynamically inserted here by JavaScript -->
            </div>

            <div class="mt-10 text-center space-x-4">
                <button id="submitBtn"
                    class="bg-blue-500 text-white font-bold py-3 px-8 rounded-full hover:bg-blue-600 transition duration-300">
                    Check Answers
                </button>
            </div>
        </div>

        <div id="results" class="mt-8 p-6 rounded-lg text-center font-bold text-lg hidden">
            <p id="scoreText"></p>
            <div class="mt-4 space-x-4">
                <button id="startGameBtn"
                    class="bg-green-500 text-white font-bold py-3 px-8 rounded-full hover:bg-green-600 transition duration-300 hidden">
                    Congratulations! Check out your reward
                </button>
                <button id="retakeQuizBtn"
                    class="bg-gray-300 text-gray-800 font-bold py-3 px-8 rounded-full hover:bg-gray-400 transition duration-300 hidden">
                    Retake Quiz
                </button>
            </div>
        </div>

        <hr class="my-12 border-gray-300">

        <!-- Game Section -->
        <div id="game-container" class="mt-8 text-center" style="display: none;">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">Gum-Gum Dragon Smash!</h2>
            <div class="flex flex-col items-center justify-center">
                <canvas id="game-canvas" width="600" height="400" class="rounded-lg shadow-2xl"></canvas>
                <div id="game-message"
                    class="mt-4 text-white font-bold text-2xl hidden p-2 rounded-lg bg-gray-800"></div>
                <div id="attack-buttons" class="mt-4 space-x-4">
                    <button id="pistol-btn"
                        class="bg-red-500 text-white font-bold py-3 px-8 rounded-full hover:bg-red-600 transition duration-300">
                        Gum-Gum Pistol
                    </button>
                    <button id="axe-btn"
                        class="bg-yellow-500 text-white font-bold py-3 px-8 rounded-full hover:bg-yellow-600 transition duration-300">
                        Gum-Gum Axe
                    </button>
                    <button id="bell-btn"
                        class="bg-blue-500 text-white font-bold py-3 px-8 rounded-full hover:bg-blue-600 transition duration-300">
                        Gum-Gum Bell
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const allQuestions = [{
            id: 'q1',
            questionText: 'What is Eiichiro Oda known for creating?',
            options: [
                { value: 'A', text: 'A famous video game' },
                { value: 'B', text: 'The manga and anime series *One Piece*' },
                { value: 'C', text: 'A popular cartoon about a dog' },
                { value: 'D', text: 'An animated movie about wizards' }
            ],
            type: 'radio'
        },
        {
            id: 'q2',
            questionText: 'According to the passage, why does Oda draw the main characters himself?',
            options: [
                { value: 'A', text: 'His assistants are not good enough.' },
                { value: 'B', text: 'He wants to keep the best parts of the job for himself.' },
                { value: 'C', text: 'He wants his own hand to bring the characters to life.' },
                { value: 'D', text: 'He doesn\'t trust anyone else with his work.' }
            ],
            type: 'radio'
        },
        {
            id: 'q3',
            questionText: 'What does the passage say about Oda\'s story planning?',
            options: [
                { value: 'A', text: 'He makes it up as he goes along.' },
                { value: 'B', text: 'He has the entire plot planned years in advance.' },
                { value: 'C', text: 'He asks his fans what should happen next.' },
                { value: 'D', text: 'He only plans a few weeks ahead.' }
            ],
            type: 'radio'
        },
        {
            id: 'q4',
            questionText: 'Which of the following describes Oda\'s studio?',
            options: [
                { value: 'A', text: 'A dark and quiet room' },
                { value: 'B', text: 'A simple room with just a desk' },
                { value: 'C', text: 'A messy room with no decorations' },
                { value: 'D', text: 'A creative playground with drawings and action figures' }
            ],
            type: 'radio'
        },
        {
            id: 'q5',
            questionText: 'The passage describes Oda\'s journey from a young age to becoming a famous artist. Which word best describes the quality that helped him achieve his dreams?',
            options: [
                { value: 'A', text: 'Luck' },
                { value: 'B', text: 'Laziness' },
                { value: 'C', text: 'Hard work' },
                { value: 'D', text: 'Wealth' }
            ],
            type: 'radio'
        },
        {
            id: 'q6',
            questionText: 'Based on the passage, what does the word **playground** mean in the sentence, "His studio is a creative playground"?',
            options: [
                { value: 'A', text: 'A place with swings and slides' },
                { value: 'B', text: 'A place where he plays with his friends' },
                { value: 'C', text: 'A place where he can have fun and be creative' },
                { value: 'D', text: 'A place where children go to school' }
            ],
            type: 'radio'
        },
        {
            id: 'q7',
            questionText: 'Select all the things that Oda has in his notebooks.',
            options: [
                { value: 'story ideas', text: 'ideas for the story' },
                { value: 'character designs', text: 'designs for new characters' },
                { value: 'maps of islands', text: 'maps of new islands' },
                { value: 'a list of his favorite foods', text: 'a list of his favorite foods' }
            ],
            type: 'checkbox'
        }
        ];

        const correctAnswers = {
            q1: "B",
            q2: "C",
            q3: "B",
            q4: "D",
            q5: "C",
            q6: "C",
            q7: ["story ideas", "character designs", "maps of islands"]
        };

        const submitBtn = document.getElementById('submitBtn');
        const retakeQuizBtn = document.getElementById('retakeQuizBtn');
        const startGameBtn = document.getElementById('startGameBtn');
        const resultsDiv = document.getElementById('results');
        const scoreText = document.getElementById('scoreText');
        const questionsContainer = document.getElementById('questions-container');
        const quizContainer = document.getElementById('quiz-container');
        const gameContainer = document.getElementById('game-container');
        const gameMessage = document.getElementById('game-message');
        const attackButtons = document.getElementById('attack-buttons');
        const timerDisplay = document.getElementById('timer-display');

        let quizStartTime = 0;
        let quizTimerInterval = null;

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = Math.floor(seconds % 60);
            const formattedMinutes = String(minutes).padStart(1, '0');
            const formattedSeconds = String(remainingSeconds).padStart(2, '0');
            return `${formattedMinutes}:${formattedSeconds}`;
        }

        function startQuizTimer() {
            quizStartTime = Date.now();
            quizTimerInterval = setInterval(() => {
                const elapsedTimeInSeconds = (Date.now() - quizStartTime) / 1000;
                timerDisplay.textContent = formatTime(elapsedTimeInSeconds);
            }, 1000);
        }

        function renderQuiz() {
            questionsContainer.innerHTML = '';
            resultsDiv.classList.add('hidden');
            retakeQuizBtn.classList.add('hidden');
            startGameBtn.classList.add('hidden');
            gameContainer.style.display = 'none';
            quizContainer.style.display = 'block';

            startQuizTimer();

            const optionLabels = ['A', 'B', 'C', 'D', 'E', 'F', 'G'];
            const shuffledQuestions = shuffleArray([...allQuestions]);
            let questionNumber = 1;

            shuffledQuestions.forEach(q => {
                const questionDiv = document.createElement('div');
                questionDiv.id = q.id;
                questionDiv.className = 'question p-6 rounded-lg shadow-md bg-white border border-gray-200';

                let optionsHtml = '';
                const shuffledOptions = shuffleArray([...q.options]);
                shuffledOptions.forEach((option, index) => {
                    const label = optionLabels[index];
                    optionsHtml += `
                        <label class="question-option block bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <input type="${q.type}" name="${q.id}" value="${option.value}" class="mr-3">
                            ${label}. ${option.text}
                        </label>
                    `;
                });

                questionDiv.innerHTML = `
                    <p class="font-semibold text-lg mb-4">${questionNumber}. ${q.questionText}</p>
                    <div class="space-y-4 text-sm sm:text-base">
                        ${optionsHtml}
                    </div>
                `;
                questionsContainer.appendChild(questionDiv);
                questionNumber++;
            });

            document.querySelectorAll('.question-option').forEach(label => {
                label.addEventListener('click', () => {
                    const input = label.querySelector('input');
                    if (input.type === 'radio') {
                        document.querySelectorAll(`input[name="${input.name}"]`).forEach(radio => {
                            radio.parentElement.classList.remove('selected');
                        });
                        label.classList.add('selected');
                    } else if (input.type === 'checkbox') {
                        label.classList.toggle('selected');
                    }
                });
            });
        }

        submitBtn.addEventListener('click', () => {
            let score = 0;
            let totalQuestions = 0;

            clearInterval(quizTimerInterval);
            const finalTime = formatTime((Date.now() - quizStartTime) / 1000);

            document.querySelectorAll('.question-option').forEach(label => {
                label.classList.remove('selected', 'correct-answer', 'incorrect-answer');
            });

            questionsContainer.querySelectorAll('.question').forEach(question => {
                const questionId = question.id;
                const labels = question.querySelectorAll('.question-option');
                const radios = question.querySelectorAll('input[type="radio"]');
                const checkboxes = question.querySelectorAll('input[type="checkbox"]');

                if (radios.length > 0) {
                    totalQuestions++;
                    const selected = question.querySelector('input[type="radio"]:checked');
                    const correctAnswerValue = correctAnswers[questionId];

                    labels.forEach(label => {
                        const input = label.querySelector('input');
                        if (input.value === correctAnswerValue) {
                            label.classList.add('correct-answer');
                        }
                    });

                    if (selected && selected.value === correctAnswerValue) {
                        score++;
                    } else if (selected) {
                        selected.parentElement.classList.add('incorrect-answer');
                    }
                } else if (checkboxes.length > 0) {
                    totalQuestions++;
                    const selectedCheckboxes = Array.from(checkboxes).filter(cb => cb.checked).map(cb => cb.value);
                    const correctCheckboxAnswers = correctAnswers[questionId];

                    labels.forEach(label => {
                        const input = label.querySelector('input');
                        if (correctCheckboxAnswers.includes(input.value)) {
                            label.classList.add('correct-answer');
                        }
                        if (selectedCheckboxes.includes(input.value) && !correctCheckboxAnswers.includes(input.value)) {
                            label.classList.add('incorrect-answer');
                        }
                    });

                    const allCorrectSelected = correctCheckboxAnswers.every(val => selectedCheckboxes.includes(val));
                    const noIncorrectSelected = selectedCheckboxes.every(val => correctCheckboxAnswers.includes(val));

                    if (allCorrectSelected && noIncorrectSelected) {
                        score++;
                    }
                }
            });

            const percentage = (score / totalQuestions) * 100;
            scoreText.textContent = `You scored ${score} out of ${totalQuestions} (${percentage.toFixed(0)}%) in ${finalTime}.`;
            resultsDiv.classList.remove('hidden');
            retakeQuizBtn.classList.remove('hidden');

            if (score === totalQuestions) {
                resultsDiv.classList.add('bg-green-100', 'text-green-700');
                resultsDiv.classList.remove('bg-red-100', 'text-red-700');
                startGameBtn.classList.remove('hidden');
                quizContainer.style.display = 'none';
                gameContainer.style.display = 'block';
                initGame();
            } else {
                resultsDiv.classList.add('bg-red-100', 'text-red-700');
                resultsDiv.classList.remove('bg-green-100', 'text-green-700');
            }
        });

        retakeQuizBtn.addEventListener('click', () => {
            renderQuiz();
        });

        // --- Game Logic ---
        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');
        const pistolBtn = document.getElementById('pistol-btn');
        const axeBtn = document.getElementById('axe-btn');
        const bellBtn = document.getElementById('bell-btn');
        const gameMessageDisplay = document.getElementById('game-message');

        const canvasWidth = canvas.width;
        const canvasHeight = canvas.height;

        let player = {
            x: 50,
            y: 300,
            width: 40,
            height: 60
        };

        let dragon = {
            x: canvasWidth - 120,
            y: 100,
            width: 80,
            height: 120,
            color: '#ff4d4d',
            isHit: false,
            fallSpeed: 0,
            rotation: 0
        };

        let attack = {
            active: false,
            type: '',
            x: 0,
            y: 0,
            endX: 0,
            endY: 0,
            startLimbX: 0,
            startLimbY: 0,
            speed: 15,
            isReturning: false,
        };

        function drawLuffy() {
            // Only draw the body if a bell attack is not active OR if the head is returning
            if (attack.type !== 'bell' || (attack.type === 'bell' && attack.isReturning === false)) {
                // Body
                ctx.fillStyle = '#ffb380'; // Skin tone
                ctx.fillRect(player.x, player.y, player.width, player.height);
                // Shirt
                ctx.fillStyle = '#f0a040'; // Red shirt
                ctx.fillRect(player.x, player.y, player.width, player.height / 2);
                // Shorts
                ctx.fillStyle = '#0055a8'; // Blue shorts
                ctx.fillRect(player.x, player.y + player.height / 2, player.width, player.height / 2);

                // Straw Hat and Head (static)
                ctx.fillStyle = '#f7d34c'; // Yellow straw hat
                ctx.beginPath();
                ctx.arc(player.x + player.width / 2, player.y, 25, 0, Math.PI * 2);
                ctx.fill();
                ctx.closePath();
                ctx.fillStyle = '#653a18'; // Ribbon
                ctx.beginPath();
                ctx.arc(player.x + player.width / 2, player.y, 18, 0, Math.PI * 2);
                ctx.fill();
                ctx.closePath();
            } else {
                // Draw the body without the head/hat during the bell attack
                ctx.fillStyle = '#ffb380';
                ctx.fillRect(player.x, player.y, player.width, player.height);
                ctx.fillStyle = '#f0a040';
                ctx.fillRect(player.x, player.y, player.width, player.height / 2);
                ctx.fillStyle = '#0055a8';
                ctx.fillRect(player.x, player.y + player.height / 2, player.width, player.height / 2);
            }
        }

        function drawDragon() {
            ctx.save();
            ctx.translate(dragon.x + dragon.width / 2, dragon.y + dragon.height / 2);
            ctx.rotate(dragon.rotation);

            // Dragon body
            ctx.fillStyle = '#ff4d4d'; // Red
            ctx.fillRect(-dragon.width / 2, -dragon.height / 2, dragon.width, dragon.height);
            // Dragon head
            ctx.fillStyle = '#ff4d4d';
            ctx.fillRect(-dragon.width / 2 + 10, -dragon.height / 2 - 20, 30, 30);
            // Wings
            ctx.fillStyle = '#ff9999'; // Lighter red
            ctx.beginPath();
            ctx.moveTo(-dragon.width / 2, -dragon.height / 2 + 10);
            ctx.lineTo(-dragon.width / 2 - 40, -dragon.height / 2 - 20);
            ctx.lineTo(-dragon.width / 2, -dragon.height / 2 + 40);
            ctx.fill();
            // Other wing
            ctx.moveTo(dragon.width / 2, -dragon.height / 2 + 10);
            ctx.lineTo(dragon.width / 2 + 40, dragon.y + 40);
            ctx.lineTo(dragon.width / 2, -dragon.height / 2 + 40);
            ctx.fill();
            // Tail
            ctx.fillStyle = '#ff4d4d';
            ctx.beginPath();
            ctx.moveTo(dragon.width / 2, dragon.height / 2 - 10);
            ctx.lineTo(dragon.width / 2 + 30, dragon.height / 2 + 20);
            ctx.lineTo(dragon.width / 2, dragon.height / 2);
            ctx.fill();
            ctx.closePath();

            ctx.restore();
        }

        function drawAttack() {
            if (!attack.active) return;

            ctx.shadowColor = '#fff';
            ctx.shadowBlur = 10;

            if (attack.type === 'pistol' || attack.type === 'axe') {
                // Standard limb stretching animation
                let color = '#ffb380';
                let endSize = attack.type === 'pistol' ? 15 : 20;

                ctx.strokeStyle = color;
                ctx.lineWidth = 15;
                ctx.beginPath();
                ctx.moveTo(attack.startLimbX, attack.startLimbY);
                ctx.lineTo(attack.x, attack.y);
                ctx.stroke();
                ctx.closePath();

                ctx.fillStyle = color;
                if (attack.type === 'pistol') {
                    ctx.beginPath();
                    ctx.arc(attack.x, attack.y, endSize, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.closePath();
                } else {
                    ctx.fillRect(attack.x - endSize / 2, attack.y - endSize / 2, endSize, endSize);
                }

            } else if (attack.type === 'bell') {
                // Gum-Gum Bell: head stretching
                // Draw the stretching neck
                ctx.strokeStyle = '#ffb380'; // Skin tone
                ctx.lineWidth = 15;
                ctx.beginPath();
                ctx.moveTo(player.x + player.width / 2, player.y);
                ctx.lineTo(attack.x, attack.y);
                ctx.stroke();
                ctx.closePath();

                // Draw the head at the end of the stretched neck
                ctx.fillStyle = '#f7d34c'; // Yellow straw hat
                ctx.beginPath();
                ctx.arc(attack.x, attack.y, 25, 0, Math.PI * 2);
                ctx.fill();
                ctx.closePath();

                ctx.fillStyle = '#653a18'; // Ribbon and head
                ctx.beginPath();
                ctx.arc(attack.x, attack.y, 18, 0, Math.PI * 2);
                ctx.fill();
                ctx.closePath();
            }
            ctx.shadowBlur = 0;
        }

        function updateGame() {
            if (dragon.isHit) {
                dragon.fallSpeed += 0.5;
                dragon.y += dragon.fallSpeed;
                dragon.rotation += 0.05;
                if (dragon.y > canvasHeight) {
                    gameMessageDisplay.textContent = 'POW! You knocked the dragon down!';
                    gameMessageDisplay.classList.remove('hidden');
                    attackButtons.style.display = 'none';
                    return;
                }
            }

            if (!attack.active) return;

            // Outgoing movement
            if (!attack.isReturning) {
                const dx = attack.endX - attack.x;
                const dy = attack.endY - attack.y;
                const distance = Math.sqrt(dx * dx + dy * dy);

                if (distance > attack.speed) {
                    attack.x += (dx / distance) * attack.speed;
                    attack.y += (dy / distance) * attack.speed;
                } else {
                    attack.x = attack.endX;
                    attack.y = attack.endY;

                    // Check for collision on impact
                    if (attack.endX > dragon.x && attack.endX < dragon.x + dragon.width &&
                        attack.endY > dragon.y && attack.endY < dragon.y + dragon.height) {
                        dragon.isHit = true;
                    }

                    // Start returning for Gum-Gum Bell
                    if (attack.type === 'bell') {
                        attack.isReturning = true;
                    } else {
                        attack.active = false;
                    }
                }
            } else { // Returning movement
                const dx = player.x + player.width / 2 - attack.x;
                const dy = player.y - attack.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                if (distance > attack.speed) {
                    attack.x += (dx / distance) * attack.speed;
                    attack.y += (dy / distance) * attack.speed;
                } else {
                    // Reset attack when it returns to the player
                    attack.active = false;
                    attack.isReturning = false;
                    attack.x = player.x + player.width / 2;
                    attack.y = player.y;
                }
            }
        }

        function draw() {
            ctx.clearRect(0, 0, canvasWidth, canvasHeight);
            drawLuffy();
            if (!dragon.isHit) {
                drawDragon();
            }
            drawAttack();

            if (dragon.isHit) {
                drawDragon();
            }
        }

        function gameLoop() {
            updateGame();
            draw();
            requestAnimationFrame(gameLoop);
        }

        function initGame() {
            dragon.isHit = false;
            dragon.y = 100;
            dragon.fallSpeed = 0;
            dragon.rotation = 0;
            gameMessageDisplay.classList.add('hidden');
            attackButtons.style.display = 'flex';
            requestAnimationFrame(gameLoop);
        }

        function handleAttack(type) {
            if (attack.active || dragon.isHit) return;

            attack.active = true;
            attack.type = type;
            attack.isReturning = false; // Reset returning state
            gameMessageDisplay.classList.add('hidden');

            if (type === 'pistol') {
                attack.startLimbX = player.x + player.width;
                attack.startLimbY = player.y + player.height / 3;
                attack.x = attack.startLimbX;
                attack.y = attack.startLimbY;
                attack.endX = dragon.x + dragon.width / 2;
                attack.endY = dragon.y + dragon.height / 2;
            } else if (type === 'axe') {
                attack.startLimbX = player.x + player.width / 2;
                attack.startLimbY = player.y + player.height;
                attack.x = attack.startLimbX;
                attack.y = attack.startLimbY;
                attack.endX = dragon.x + dragon.width / 2;
                attack.endY = dragon.y + dragon.height / 2;
            } else if (type === 'bell') {
                // Gum-Gum Bell logic
                attack.startLimbX = player.x + player.width / 2;
                attack.startLimbY = player.y;
                attack.x = attack.startLimbX;
                attack.y = attack.startLimbY;
                attack.endX = dragon.x + dragon.width / 2;
                attack.endY = dragon.y + dragon.height / 2;
            }
        }

        pistolBtn.addEventListener('click', () => handleAttack('pistol'));
        axeBtn.addEventListener('click', () => handleAttack('axe'));
        bellBtn.addEventListener('click', () => handleAttack('bell'));

        window.onload = renderQuiz;
    </script>
</body>

</html>
