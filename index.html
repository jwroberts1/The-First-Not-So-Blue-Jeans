<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Creator of a Pirate Legend Quiz</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }

        .question-option {
            transition: all 0.2s;
            cursor: pointer;
        }

        .question-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .question-option.selected {
            background-color: #e0f2fe;
            border-left: 4px solid #3b82f6;
        }

        .question-option.correct-answer {
            background-color: #dcfce7;
            border-left: 4px solid #10b981;
        }

        .question-option.incorrect-answer {
            background-color: #fee2e2;
            border-left: 4px solid #ef4444;
        }
    </style>
</head>

<body class="p-4 sm:p-8">
    <div class="max-w-4xl mx-auto bg-white shadow-xl rounded-lg p-6 sm:p-10 mb-8">
        <h1 class="text-3xl sm:text-4xl font-bold text-center text-gray-800 mb-6">The Creator of a Pirate Legend</h1>
        <p class="text-gray-600 text-center mb-8">Read the passage. Then answer the questions.</p>

        <!-- Quiz Section -->
        <div id="quiz-container">
            <div id="passage" class="bg-gray-50 rounded-lg p-6 mb-10 text-gray-700 leading-relaxed text-sm sm:text-base border border-gray-200">
                <h2 class="text-xl sm:text-2xl font-semibold mb-4">Passage:</h2>
                <p class="mb-4">Born in a small city in Japan, Eiichiro Oda was a boy who loved to draw and dream. His biggest inspiration came from pirate cartoons and old stories about brave heroes on the sea. When he was just four years old, he made a big decision: he wanted to become a manga artist, a person who creates Japanese comic books. This was his dream, and from that day on, he worked toward it with the same determination as the pirates he admired.</p>

                <p class="mb-4">As a teenager, Oda started drawing his own comic stories and sending them to magazines. His first story to win a prize was called *Wanted!*. This early success was a huge step for him and showed everyone that he had a special talent. But he knew that to become a real professional, he had a lot more to learn.</p>

                <p class="mb-4">When he was 17, Oda moved to the big city to work as an assistant for some of the most famous manga artists in Japan. This was like going to pirate school for him. He worked incredibly hard, often staying up all night to draw and help with the artists' stories. He learned how to draw every kind of character and background and how to build a world that felt real and exciting. It was during this time that he had the idea for a new pirate story.</p>

                <p class="mb-4">This new story was about a boy named Luffy, who had a stretchy body and a huge dream: to find the legendary treasure called the One Piece and become the King of the Pirates. With all the skills he learned as an assistant, Oda began to draw this amazing new adventure. He filled his pages with incredible detail, from the designs of the pirate ships to the unique looks of each character. It was a lot of work, but he loved every moment.</p>

                <p class="mb-4">In 1997, *One Piece* was published for the very first time. At first, not everyone was sure if it would be a big hit, but they were wrong! The story of Luffy and his crew quickly became one of the most popular in the world. As the years went by, Oda continued to work on the story, drawing new chapters almost every week. He planned the story out years in advance, creating a world so big and detailed that fans still love to explore every corner of it. His hard work and dedication have made *One Piece* one of the longest and best-loved stories in history. Eiichiro Oda’s true treasure wasn’t gold or jewels, but the gift of his incredible imagination, which he shared with millions of people, teaching them that the greatest adventures are the ones you share with your friends.</p>
            </div>

            <div id="questions-container" class="space-y-10">
                <!-- Questions will be dynamically inserted here by JavaScript -->
            </div>

            <div class="mt-10 text-center space-x-4">
                <button id="submitBtn" class="bg-blue-500 text-white font-bold py-3 px-8 rounded-full hover:bg-blue-600 transition duration-300">
                    Check Answers
                </button>
            </div>
        </div>

        <div id="results" class="mt-8 p-6 rounded-lg text-center font-bold text-lg hidden">
            <p id="scoreText"></p>
            <div class="mt-4 space-x-4">
                <button id="retakeQuizBtn" class="bg-gray-300 text-gray-800 font-bold py-3 px-8 rounded-full hover:bg-gray-400 transition duration-300 hidden">
                    Retake Quiz
                </button>
            </div>
        </div>

        <div id="congratulations-container" class="mt-8 p-6 rounded-lg text-center hidden">
            <h2 class="text-3xl font-bold text-green-700 mb-4">Congratulations! You did it!</h2>
            <p class="text-gray-600 text-lg mb-4">You got all the questions correct! Here's your reward.</p>
            <img src="https://raw.githubusercontent.com/jwroberts1/The-First-Not-So-Blue-Jeans/main/luffy.jpg" alt="Congratulations from Luffy" class="mx-auto rounded-lg shadow-lg">
        </div>
    </div>

    <script>
        const allQuestions = [
            {
                id: 'q1',
                questionText: 'What was Eiichiro Oda\'s biggest dream when he was four years old?',
                options: [
                    { value: 'A', text: 'To become a famous pirate' },
                    { value: 'B', text: 'To travel the world' },
                    { value: 'C', text: 'To become a manga artist' },
                    { value: 'D', text: 'To find a treasure chest' }
                ],
                type: 'radio'
            },
            {
                id: 'q2',
                questionText: 'What was the name of his first story to win a prize?',
                options: [
                    { value: 'A', text: '*One Piece*' },
                    { value: 'B', text: '*Wanted!*' },
                    { value: 'C', text: 'The Pirate King' },
                    { value: 'D', text: 'Luffy\'s Dream' }
                ],
                type: 'radio'
            },
            {
                id: 'q3',
                questionText: 'According to the passage, what did Oda do when he was 17?',
                options: [
                    { value: 'A', text: 'He sailed on a real pirate ship.' },
                    { value: 'B', text: 'He found the One Piece treasure.' },
                    { value: 'C', text: 'He became an assistant for manga artists.' },
                    { value: 'D', text: 'He started a new magazine.' }
                ],
                type: 'radio'
            },
            {
                id: 'q4',
                questionText: 'What year was *One Piece* published for the first time?',
                options: [
                    { value: 'A', text: '1990' },
                    { value: 'B', text: '1997' },
                    { value: 'C', text: '2001' },
                    { value: 'D', text: '2010' }
                ],
                type: 'radio'
            },
            {
                id: 'q5',
                questionText: 'Based on the passage, what is a "manga artist"?',
                options: [
                    { value: 'A', text: 'A person who draws Japanese comic books' },
                    { value: 'B', text: 'A person who writes pirate stories' },
                    { value: 'C', text: 'A person who travels on ships' },
                    { value: 'D', text: 'A person who dreams about treasure' }
                ],
                type: 'radio'
            },
            {
                id: 'q6',
                questionText: 'Select all the things that Eiichiro Oda learned while working as an assistant.',
                options: [
                    { value: 'draw characters', text: 'how to draw every kind of character' },
                    { value: 'find treasure', text: 'how to find a treasure chest' },
                    { value: 'build a world', text: 'how to build a world that felt real and exciting' },
                    { value: 'cook pirate food', text: 'how to cook pirate food' }
                ],
                type: 'checkbox'
            }
        ];

        const correctAnswers = {
            q1: "C",
            q2: "B",
            q3: "C",
            q4: "B",
            q5: "A",
            q6: ["draw characters", "build a world"]
        };

        const submitBtn = document.getElementById('submitBtn');
        const retakeQuizBtn = document.getElementById('retakeQuizBtn');
        const resultsDiv = document.getElementById('results');
        const scoreText = document.getElementById('scoreText');
        const questionsContainer = document.getElementById('questions-container');
        const quizContainer = document.getElementById('quiz-container');
        const congratulationsContainer = document.getElementById('congratulations-container');

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function renderQuiz() {
            questionsContainer.innerHTML = '';
            resultsDiv.classList.add('hidden');
            retakeQuizBtn.classList.add('hidden');
            congratulationsContainer.classList.add('hidden');
            quizContainer.style.display = 'block';

            const optionLabels = ['A', 'B', 'C', 'D', 'E', 'F', 'G'];
            const shuffledQuestions = shuffleArray([...allQuestions]);
            let questionNumber = 1;
            
            shuffledQuestions.forEach(q => {
                const questionDiv = document.createElement('div');
                questionDiv.id = q.id;
                questionDiv.className = 'question p-6 rounded-lg shadow-md bg-white border border-gray-200';
                
                let optionsHtml = '';
                const shuffledOptions = shuffleArray([...q.options]);
                shuffledOptions.forEach((option, index) => {
                    const label = optionLabels[index];
                    optionsHtml += `
                        <label class="question-option block bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <input type="${q.type}" name="${q.id}" value="${option.value}" class="mr-3">
                            ${label}. ${option.text}
                        </label>
                    `;
                });

                questionDiv.innerHTML = `
                    <p class="font-semibold text-lg mb-4">${questionNumber}. ${q.questionText}</p>
                    <div class="space-y-4 text-sm sm:text-base">
                        ${optionsHtml}
                    </div>
                `;
                questionsContainer.appendChild(questionDiv);
                questionNumber++;
            });

            document.querySelectorAll('.question-option').forEach(label => {
                label.addEventListener('click', () => {
                    const input = label.querySelector('input');
                    if (input.type === 'radio') {
                        document.querySelectorAll(`input[name="${input.name}"]`).forEach(radio => {
                            radio.parentElement.classList.remove('selected');
                        });
                        label.classList.add('selected');
                    } else if (input.type === 'checkbox') {
                        label.classList.toggle('selected');
                    }
                });
            });
        }

        submitBtn.addEventListener('click', () => {
            let score = 0;
            let totalQuestions = 0;

            document.querySelectorAll('.question-option').forEach(label => {
                label.classList.remove('selected', 'correct-answer', 'incorrect-answer');
            });

            questionsContainer.querySelectorAll('.question').forEach(question => {
                const questionId = question.id;
                const labels = question.querySelectorAll('.question-option');
                const radios = question.querySelectorAll('input[type="radio"]');
                const checkboxes = question.querySelectorAll('input[type="checkbox"]');
                
                if (radios.length > 0) {
                    totalQuestions++;
                    const selected = question.querySelector('input[type="radio"]:checked');
                    const correctAnswerValue = correctAnswers[questionId];

                    labels.forEach(label => {
                        const input = label.querySelector('input');
                        if (input.value === correctAnswerValue) {
                            label.classList.add('correct-answer');
                        }
                    });

                    if (selected && selected.value === correctAnswerValue) {
                        score++;
                    } else if (selected) {
                        selected.parentElement.classList.add('incorrect-answer');
                    }
                } else if (checkboxes.length > 0) {
                    totalQuestions++;
                    const selectedCheckboxes = Array.from(checkboxes).filter(cb => cb.checked).map(cb => cb.value);
                    const correctCheckboxAnswers = correctAnswers[questionId];

                    labels.forEach(label => {
                        const input = label.querySelector('input');
                        if (correctCheckboxAnswers.includes(input.value)) {
                            label.classList.add('correct-answer');
                        }
                        if (selectedCheckboxes.includes(input.value) && !correctCheckboxAnswers.includes(input.value)) {
                            label.classList.add('incorrect-answer');
                        }
                    });
                    
                    const allCorrectSelected = correctCheckboxAnswers.every(val => selectedCheckboxes.includes(val));
                    const noIncorrectSelected = selectedCheckboxes.every(val => correctCheckboxAnswers.includes(val));
                    
                    if (allCorrectSelected && noIncorrectSelected) {
                        score++;
                    }
                }
            });

            const percentage = (score / totalQuestions) * 100;
            scoreText.textContent = `You scored ${score} out of ${totalQuestions} (${percentage.toFixed(0)}%).`;
            resultsDiv.classList.remove('hidden');
            retakeQuizBtn.classList.remove('hidden');

            if (score === totalQuestions) {
                resultsDiv.classList.add('bg-green-100', 'text-green-700');
                resultsDiv.classList.remove('bg-red-100', 'text-red-700');
                congratulationsContainer.classList.remove('hidden');
                quizContainer.style.display = 'none';
            } else {
                resultsDiv.classList.add('bg-red-100', 'text-red-700');
                resultsDiv.classList.remove('bg-green-100', 'text-green-700');
            }
        });

        retakeQuizBtn.addEventListener('click', () => {
            renderQuiz();
        });
        
        window.onload = renderQuiz;
    </script>
</body>

</html>
