<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peanuts: Everyday Inspirations</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Bangers&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }

        .question-option {
            transition: all 0.2s;
            cursor: pointer;
        }

        .question-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .question-option.selected {
            background-color: #e0f2fe;
            border-left: 4px solid #3b82f6;
        }

        .question-option.correct-answer {
            background-color: #dcfce7;
            border-left: 4px solid #10b981;
        }

        .question-option.incorrect-answer {
            background-color: #fee2e2;
            border-left: 4px solid #ef4444;
        }

        .game-font {
            font-family: 'Bangers', cursive;
        }

        /* --- GAME STYLES --- */
        #game-canvas {
            background: #87CEEB; /* Sky Blue */
            border-bottom: 60px solid #4ade80; /* Grass */
            border-left: 4px solid #3b82f6;
            border-right: 4px solid #3b82f6;
            border-top: 4px solid #3b82f6;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(2, 132, 199, 0.5);
            width: 100%;
            height: 100%;
        }
        
        .control-button {
            @apply bg-gray-700 text-white p-4 rounded-xl text-3xl font-bold transition-transform transform active:scale-95;
            -webkit-tap-highlight-color: transparent; /* Removes blue highlight on tap */
            width: 80px;
            height: 80px;
        }

        @media (max-width: 1024px) {
            #mobile-controls {
                display: flex !important;
            }
        }
        
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center; /* Corrected 'align: center' */
        }

        .modal-content {
            background-color: #fff;
            padding: 2.5rem;
            border-radius: 12px;
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>

<body class="p-4 sm:p-8">
    <!-- Navigation Links -->
    <div class="max-w-4xl mx-auto flex justify-between mb-4 text-lg font-semibold">
        <a href="./Math.html" class="text-green-600 hover:text-green-800 underline">
            Go to Math &rarr;
        </a>
        <a href="./Spelling.html" class="text-indigo-600 hover:text-indigo-800 underline">
            Go to Spelling &rarr;
        </a>
    </div>

    <div class="max-w-4xl mx-auto bg-white shadow-xl rounded-lg p-6 sm:p-10 mb-8">
        <h1 class="text-3xl sm:text-4xl font-bold text-center text-gray-800 mb-6">Peanuts: Everyday Inspirations</h1>
        <p class="text-gray-600 text-center mb-8">Charlie Brown and friends find inspiration in unexpected places.</p>

        <!-- Timer Section -->
        <div id="timer-container" class="bg-gray-100 p-4 rounded-lg text-center mb-6">
            <p class="text-sm font-semibold text-gray-600">Time Elapsed:</p>
            <p id="timer" class="text-2xl font-bold text-blue-600 mt-1">0:00</p>
        </div>

        <!-- Quiz Section -->
        <div id="quiz-container">
            <div id="passage" class="bg-gray-50 rounded-lg p-6 mb-10 text-gray-700 leading-relaxed text-base sm:text-lg border border-gray-200">
                
                <h2 class="text-2xl sm:text-3xl font-semibold mb-6 text-indigo-700">Chapter 1: The Computer Glitch</h2>
                <p class="mb-4">It was a rainy Saturday, and the Peanuts gang was gathered at Charlie Brown’s house. They were trying to play a video game, but the screen kept freezing. "Good grief!" Charlie Brown sighed, dropping the controller. "We'll never get to the next level."</p>
                <p class="mb-4">Franklin picked up the controller and started tapping buttons. "Don't give up, Charlie Brown," he said calmly. "Think about Clarence 'Skip' Ellis. He was the first African American to get a Ph.D. in computer science. He helped create things like icons and clicking on screens—stuff we use every day! If he had given up when computers were confusing and new, we wouldn't even have this game."</p>
                <p class="mb-4">Linus nodded, wrapping his blanket around himself. "That's right. Skip Ellis believed that computers should help people work together. He didn't just see a machine; he saw a way to connect us." Charlie Brown looked at the frozen screen. "So, you're saying I should be patient? Like a computer scientist?" "Exactly," Franklin smiled. "And maybe reboot the system."</p>

                <h2 class="text-2xl sm:text-3xl font-semibold mb-6 text-indigo-700">Chapter 2: The Caller ID Mystery</h2>
                <p class="mb-4">Just then, the phone rang. Lucy grabbed it. "Hello? Is this the library? No? Then why are you calling me?" She slammed the phone down. "Another wrong number! I wish I knew who was calling before I picked up!"</p>
                <p class="mb-4">Marcie adjusted her glasses. "Actually, Sir—I mean, Lucy—you can thank Dr. Shirley Jackson for that idea. She's a brilliant physicist. Her research helped make Caller ID possible. She also helped invent the touch-tone telephone and fiber optic cables."</p>
                <p class="mb-4">"Really?" Lucy looked at the phone with new respect. "A woman invented the science behind Caller ID?" "Yes," Marcie said proudly. "She was the first African American woman to earn a doctorate from MIT. She studied the smallest particles in the universe to make big changes in how we talk to each other." Lucy picked up the phone again. "Well, next time I'll use my scientific observation skills... and maybe check the Caller ID."</p>

                <h2 class="text-2xl sm:text-3xl font-semibold mb-6 text-indigo-700">Chapter 3: Reach for the Stars</h2>
                <p class="mb-4">The rain stopped, and the sun peeked out. The gang ran outside. Snoopy was sitting on top of his doghouse, wearing a space helmet (which was actually a fishbowl). He was pretending to blast off. "Where is he going?" Sally asked.</p>
                <p class="mb-4">"I think he's inspired by Guion Bluford," Franklin said, looking up at the sky. "He was the first African American astronaut in space. He flew on the Space Shuttle Challenger four times! He had to study hard in math and science and learn to fly jets before he could go to the stars."</p>
                <p class="mb-4">Snoopy floated in zero-gravity (slow motion) on his doghouse roof. He imagined seeing the Earth from miles above, a blue marble in the dark sky. "Guy Bluford showed us that the sky isn't the limit," Charlie Brown said, watching his dog. "It's just the beginning. Maybe one day, I'll be an astronaut." Lucy laughed. "You? An astronaut? You get dizzy on a swing set!" "Guy Bluford had to train," Charlie Brown said firmly. "And so will I."</p>

                <h2 class="text-2xl sm:text-3xl font-semibold mb-6 text-indigo-700">Chapter 4: The Comic Book Hero</h2>
                <p class="mb-4">Later, they went to the comic book store. Linus was looking for a new issue of his favorite superhero comic. "I wish I could write stories like this," he said. "Stories about different worlds and amazing heroes."</p>
                <p class="mb-4">"You should look up Christopher Priest," Franklin suggested, handing Linus a graphic novel. "He was the first African American writer and editor in mainstream comic books. He wrote for Spider-Man and Green Lantern, but he's most famous for writing Black Panther. He made the character cool, smart, and complex."</p>
                <p class="mb-4">Linus opened the book. The pictures were vibrant, and the words jumped off the page. "He didn't just write fights," Franklin continued. "He wrote about politics, and kings, and what it means to be a leader. He showed that comics can be serious literature." Linus hugged the book. "I'm going to write a comic," he decided. "It will be about a boy with a security blanket who saves the world with wisdom!"</p>

                <h2 class="text-2xl sm:text-3xl font-semibold mb-6 text-indigo-700">Chapter 5: Everyday Heroes</h2>
                <p class="mb-4">As they walked home, the streetlights flickered on. "You know," Charlie Brown said, "Skip Ellis, Dr. Shirley Jackson, Guion Bluford, Christopher Priest... they didn't have superpowers. They just worked hard and used their brains."</p>
                <p class="mb-4">"That's the best kind of hero," Peppermint Patty said, tossing a baseball in the air. "The kind you can actually be. We don't have to wait for a radioactive spider to bite us. We can just... study. Or write. Or fly."</p>
                <p class="mb-4">Snoopy trotted beside them, still wearing his fishbowl helmet. He barked happily. He knew that even a beagle could be a hero if he had a big imagination. "They inspire us to be better at what we do every day," Marcie observed. "Whether it's answering the phone, playing a video game, or looking at the stars."</p>

                <h2 class="text-2xl sm:text-3xl font-semibold mb-6 text-indigo-700">Chapter 6: A New Dream</h2>
                <p class="mb-4">That night, Charlie Brown sat at his desk. He wasn't playing video games. He was writing. He was writing a story about a kid who never gave up, no matter how many times he missed the football. He thought about Christopher Priest writing Black Panther. He thought about Guy Bluford in his shuttle.</p>
                <p class="mb-4">He looked at his phone and thought about Dr. Jackson. He looked at his computer and thought about Skip Ellis. "They changed the world just by being themselves and doing what they loved," he whispered.</p>
                <p class="mb-4">Linus called him on the phone. "Charlie Brown? Are you working on your comic?" "I am," Charlie Brown said. "It's going to be great." "Good," Linus said. "Because I'm working on my astronaut training. I'm currently spinning in my office chair." Charlie Brown laughed. "Good luck, Linus. To the moon!" "To the moon!" Linus agreed. And for the Peanuts gang, the future looked as bright as a star.</p>

            </div>

            <div id="questions-container" class="space-y-10">
                <!-- Questions will be dynamically inserted here by JavaScript -->
            </div>

            <div class="mt-10 text-center space-x-4">
                <button id="submitBtn" class="bg-blue-500 text-white font-bold py-3 px-8 rounded-full hover:bg-blue-600 transition duration-300 shadow-lg">
                    Check Answers
                </button>
            </div>
        </div>

        <div id="results" class="mt-8 p-6 rounded-lg text-center font-bold text-lg hidden">
            <p id="scoreText"></p>
            <div class="mt-4 space-x-4">
                <button id="startGameBtn" class="bg-green-500 text-white font-bold py-3 px-8 rounded-full hover:bg-green-600 transition duration-300 shadow-md hidden">
                    Congratulations! Play Snoopy's Word Catcher!
                </button>
                <button id="retakeQuizBtn" class="bg-gray-300 text-gray-800 font-bold py-3 px-8 rounded-full hover:bg-gray-400 transition duration-300 shadow-md hidden">
                    Retake Quiz
                </button>
            </div>
        </div>

        <hr class="my-12 border-gray-300">

        <!-- --- GAME SECTION: Snoopy's Word Catcher --- -->
        <div id="game-container" class="flex flex-col items-center justify-center min-h-[500px] p-4 bg-gray-100 rounded-lg shadow-inner" style="display: none;">
            
            <div id="game-info" class="mb-4 w-full max-w-xl text-center text-gray-800 bg-white p-4 rounded-xl border-2 border-blue-400">
                <h1 class="text-3xl font-bold mb-2 header-font text-blue-700">Snoopy's Word Catcher!</h1>
                <p class="text-gray-600">Catch 10 <span class="text-green-600 font-bold">GOOD</span> words (inspire, dream, learn) to win! Avoid the <span class="text-red-600 font-bold">BAD</span> words (quit, lazy, mean)!</p>
            </div>

            <!-- Game Stats -->
            <div class="flex justify-between w-full max-w-xl mb-2 px-4 text-gray-800 game-font text-2xl">
                <div id="score-display">WORDS: 0/10</div>
                <div id="timer-display">TIME: 60</div>
            </div>

            <!-- Game Canvas -->
            <div id="game-canvas-container" class="relative w-full max-w-xl aspect-[4/3] overflow-hidden rounded-lg">
                 <canvas id="game-canvas"></canvas>
            </div>

            <!-- Mobile Controls -->
            <div id="mobile-controls" class="hidden flex justify-center space-x-12 w-full mt-6">
                <button id="left-btn" class="control-button">◄</button>
                <button id="right-btn" class="control-button">►</button>
            </div>

            <!-- Game Over Modal -->
            <div id="game-over-modal" class="modal-overlay hidden">
                 <div class="modal-content text-center bg-yellow-50 border-4 border-yellow-400">
                    <h2 id="modal-title-text" class="text-3xl font-bold mb-4 text-yellow-700 header-font">Good Grief!</h2>
                    <p id="modal-body-text" class="text-gray-800 text-lg mb-6">Game Over!</p>
                    <button id="playAgainBtn" class="bg-yellow-400 text-gray-900 font-bold py-2 px-6 rounded-full hover:bg-yellow-500 transition duration-300">Play Again</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- NEW QUIZ DATA (Based on Everyday Inspirations Story) ---
        const allQuestions = [
            {
                id: 'q1',
                questionText: "Why was Charlie Brown frustrated at the beginning of the story?",
                options: [
                    { value: 'A', text: 'His kite was stuck in a tree.' },
                    { value: 'B', text: 'His video game kept freezing.' },
                    { value: 'C', text: 'He lost his baseball glove.' },
                    { value: 'D', text: 'Snoopy wouldn\'t wake up.' }
                ],
                type: 'radio'
            },
            {
                id: 'q2',
                questionText: "What did Clarence 'Skip' Ellis help create?",
                options: [
                    { value: 'A', text: 'The first airplane.' },
                    { value: 'B', text: 'Icons and clicking on computer screens.' },
                    { value: 'C', text: 'The telephone.' },
                    { value: 'D', text: 'Video games about dogs.' }
                ],
                type: 'radio'
            },
            {
                id: 'q3',
                questionText: "Why did Lucy wish she had Caller ID?",
                options: [
                    { value: 'A', text: 'So she could call Charlie Brown.' },
                    { value: 'B', text: 'Because she kept getting wrong number calls.' },
                    { value: 'C', text: 'To order pizza.' },
                    { value: 'D', text: 'To talk to Schroeder.' }
                ],
                type: 'radio'
            },
            {
                id: 'q4',
                questionText: "What field was Dr. Shirley Jackson a brilliant scientist in?",
                options: [
                    { value: 'A', text: 'Biology.' },
                    { value: 'B', text: 'Physics.' },
                    { value: 'C', text: 'Chemistry.' },
                    { value: 'D', text: 'History.' }
                ],
                type: 'radio'
            },
            {
                id: 'q5',
                questionText: "Who inspired Snoopy to wear a space helmet?",
                options: [
                    { value: 'A', text: 'Guion Bluford.' },
                    { value: 'B', text: 'Neil Armstrong.' },
                    { value: 'C', text: 'Skip Ellis.' },
                    { value: 'D', text: 'Woodstock.' }
                ],
                type: 'radio'
            },
            {
                id: 'q6',
                questionText: "What was special about Guion Bluford?",
                options: [
                    { value: 'A', text: 'He was the first person on Mars.' },
                    { value: 'B', text: 'He invented the rocket.' },
                    { value: 'C', text: 'He was the first African American astronaut in space.' },
                    { value: 'D', text: 'He wrote comic books.' }
                ],
                type: 'radio'
            },
            {
                id: 'q7',
                questionText: "What job did Christopher Priest have?",
                options: [
                    { value: 'A', text: 'He was an astronaut.' },
                    { value: 'B', text: 'He was a doctor.' },
                    { value: 'C', text: 'He was a comic book writer and editor.' },
                    { value: 'D', text: 'He was a computer scientist.' }
                ],
                type: 'radio'
            },
            {
                id: 'q8',
                questionText: "Which comic book character did Christopher Priest famously write for?",
                options: [
                    { value: 'A', text: 'Superman.' },
                    { value: 'B', text: 'Batman.' },
                    { value: 'C', text: 'Black Panther.' },
                    { value: 'D', text: 'The Hulk.' }
                ],
                type: 'radio'
            },
            {
                id: 'q9',
                questionText: "What did Charlie Brown realize about these heroes?",
                options: [
                    { value: 'A', text: 'They all had superpowers.' },
                    { value: 'B', text: 'They changed the world by working hard and using their brains.' },
                    { value: 'C', text: 'They were all imaginary.' },
                    { value: 'D', text: 'They only lived in the future.' }
                ],
                type: 'radio'
            },
            {
                id: 'q10',
                questionText: "What did Linus decide to do at the end of the story?",
                options: [
                    { value: 'A', text: 'Go to sleep.' },
                    { value: 'B', text: 'Start astronaut training in his office chair.' },
                    { value: 'C', text: 'Eat a sandwich.' },
                    { value: 'D', text: 'Fly a kite.' }
                ],
                type: 'radio'
            }
        ];

        // --- NEW Correct Answers ---
        const correctAnswers = {
            q1: "B",
            q2: "B",
            q3: "B",
            q4: "B",
            q5: "A",
            q6: "C",
            q7: "C",
            q8: "C",
            q9: "B",
            q10: "B"
        };


        // --- ALL SCRIPTING BELOW THIS LINE IS UNCHANGED ---

        // DOM elements
        const submitBtn = document.getElementById('submitBtn');
        const retakeQuizBtn = document.getElementById('retakeQuizBtn');
        const startGameBtn = document.getElementById('startGameBtn');
        const resultsDiv = document.getElementById('results');
        const scoreText = document.getElementById('scoreText');
        const questionsContainer = document.getElementById('questions-container');
        const quizContainer = document.getElementById('quiz-container');
        const gameContainer = document.getElementById('game-container');
        const timerDisplay = document.getElementById('timer');

        // Quiz State
        let startTime;
        let timerInterval;

        // Function to shuffle an array in place (Fisher-Yates shuffle)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Timer functions
        function updateTimerDisplay() {
            const currentTime = Date.now();
            const elapsedTime = Math.floor((currentTime - startTime) / 1000);
            const minutes = Math.floor(elapsedTime / 60);
            const seconds = elapsedTime % 60;
            timerDisplay.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        }

        function startTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            startTime = Date.now();
            updateTimerDisplay();
            timerInterval = setInterval(updateTimerDisplay, 1000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
        }

        // Renders the quiz questions to the page
        function renderQuiz() {
            questionsContainer.innerHTML = '';
            resultsDiv.classList.add('hidden');
            retakeQuizBtn.classList.add('hidden');
            startGameBtn.classList.add('hidden');
            gameContainer.style.display = 'none';
            quizContainer.style.display = 'block';

            const optionLabels = ['A', 'B', 'C', 'D'];
            const shuffledQuestions = shuffleArray([...allQuestions]);

            shuffledQuestions.forEach((q, questionIndex) => {
                const questionDiv = document.createElement('div');
                questionDiv.id = q.id;
                questionDiv.className = 'question p-6 rounded-lg shadow-md bg-white border border-gray-200';

                const questionText = document.createElement('p');
                questionText.className = 'font-semibold text-lg mb-4';
                questionText.innerHTML = `${questionIndex + 1}. ${q.questionText}`;
                questionDiv.appendChild(questionText);

                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'space-y-4 text-sm sm:text-base';
                questionDiv.appendChild(optionsDiv);

                const shuffledOptions = shuffleArray([...q.options]);
                shuffledOptions.forEach((option, index) => {
                    const label = document.createElement('label');
                    label.className = 'question-option block bg-gray-50 p-4 rounded-lg border border-gray-200';
                    const input = document.createElement('input');
                    input.type = q.type;
                    input.name = q.id;
                    input.value = option.value;
                    input.className = 'mr-3';

                    label.appendChild(input);
                    label.appendChild(document.createTextNode(`${optionLabels[index]}. ${option.text}`));

                    label.addEventListener('click', () => {
                        if (input.type === 'radio') {
                            document.querySelectorAll(`input[name="${input.name}"]`).forEach(radio => {
                                radio.parentElement.classList.remove('selected');
                            });
                            label.classList.add('selected');
                        }
                    });
                    optionsDiv.appendChild(label);
                });
                questionsContainer.appendChild(questionDiv);
            });
            startTimer();
        }

        // Event Listeners for quiz
        submitBtn.addEventListener('click', () => {
            let score = 0;
            let totalQuestions = 0;
            let allAnswered = true;

            document.querySelectorAll('.question-option').forEach(label => {
                label.classList.remove('selected', 'correct-answer', 'incorrect-answer');
            });

            questionsContainer.querySelectorAll('.question').forEach(question => {
                const questionId = question.id;
                const labels = question.querySelectorAll('.question-option');
                const selected = question.querySelector('input[type="radio"]:checked');
                const correctAnswerValue = correctAnswers[questionId];

                if (!selected) {
                    allAnswered = false;
                    return;
                }

                totalQuestions++;
                labels.forEach(label => {
                    const input = label.querySelector('input');
                    if (input.value === correctAnswerValue) {
                        label.classList.add('correct-answer');
                    }
                });

                if (selected && selected.value === correctAnswerValue) {
                    score++;
                } else if (selected) {
                    selected.parentElement.classList.add('incorrect-answer');
                }
            });

            if (!allAnswered) {
                showBasicMessage("Please answer all questions before submitting.");
                return;
            }

            const percentage = (score / totalQuestions) * 100;
            scoreText.textContent = `You scored ${score} out of ${totalQuestions} (${percentage.toFixed(0)}%).`;
            resultsDiv.classList.remove('hidden');
            retakeQuizBtn.classList.remove('hidden');

            if (score === totalQuestions) {
                stopTimer(); // Stop the timer on a perfect score
                const finalTime = timerDisplay.textContent;
                scoreText.textContent = `You scored ${score} out of ${totalQuestions} (${percentage.toFixed(0)}%). You completed the quiz in ${finalTime}.`;
                resultsDiv.classList.add('bg-green-100', 'text-green-700');
                resultsDiv.classList.remove('bg-red-100', 'text-red-700');
                startGameBtn.classList.remove('hidden');
            } else {
                resultsDiv.classList.add('bg-red-100', 'text-red-700');
                resultsDiv.classList.remove('bg-green-100', 'text-green-700');
            }
        });

        retakeQuizBtn.addEventListener('click', () => {
            renderQuiz();
        });

        startGameBtn.addEventListener('click', () => {
            quizContainer.style.display = 'none';
            gameContainer.style.display = 'flex';
            startGame();
        });

        // Simple message box to replace alert()
        function showBasicMessage(message) {
            const messageBox = document.createElement('div');
            messageBox.className = 'modal-overlay';
            messageBox.innerHTML = `
                <div class="modal-content text-center bg-yellow-50 border-4 border-yellow-400">
                    <p class="text-gray-800 text-lg sm:text-xl mb-4 font-semibold">${message}</p>
                    <button class="bg-yellow-400 text-gray-900 font-bold py-2 px-6 rounded-full hover:bg-yellow-500 transition duration-300">OK</button>
                </div>
            `;
            document.body.appendChild(messageBox);
            messageBox.querySelector('button').addEventListener('click', () => {
                document.body.removeChild(messageBox);
            });
        }


        // --- SNOOPY'S WORD CATCHER GAME LOGIC ---

        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');
        const scoreDisplay = document.getElementById('score-display');
        const gameTimerDisplay = document.getElementById('timer-display');
        const gameOverModal = document.getElementById('game-over-modal');
        const modalTitleText = document.getElementById('modal-title-text');
        const modalBodyText = document.getElementById('modal-body-text');
        const playAgainBtn = document.getElementById('playAgainBtn');
        const leftBtn = document.getElementById('left-btn');
        const rightBtn = document.getElementById('right-btn');

        // Game constants
        const playerWidth = 60;
        const playerHeight = 60;
        const gravity = 0; // Not a jumping game
        const wordSpeed = 3;
        
        // Words data - Updated to catch GOOD values
        const goodWords = ["INSPIRE", "DREAM", "LEARN", "CREATE", "FLY", "WRITE", "THINK", "SOLVE"];
        const badWords = ["QUIT", "LAZY", "MEAN", "BORED", "STOP", "CANT", "HATE", "FEAR"];

        // Game state variables
        let playerX;
        let playerY;
        let fallingWords = [];
        let score = 0;
        let timeLeft = 60;
        let gameLoop;
        let spawnInterval;
        let gameTimerInterval;
        let isMovingLeft = false;
        let isMovingRight = false;

        function resizeCanvas() {
            const container = document.getElementById('game-canvas-container');
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            playerY = canvas.height - playerHeight - 10;
        }

        // Initialize player position
        function initPlayer() {
            playerX = canvas.width / 2 - playerWidth / 2;
        }

        // Draw Snoopy (simplified as a white box with black ears for now, or text)
        function drawPlayer() {
            // Draw Snoopy-like shape
            ctx.fillStyle = "white";
            ctx.beginPath();
            ctx.ellipse(playerX + playerWidth/2, playerY + playerHeight/2, playerWidth/2, playerHeight/3, 0, 0, Math.PI * 2);
            ctx.fill();
            // Ear
            ctx.fillStyle = "black";
            ctx.beginPath();
            ctx.ellipse(playerX + 20, playerY + playerHeight/2, 10, 15, 0, 0, Math.PI * 2);
            ctx.fill();
            // Nose
            ctx.beginPath();
            ctx.ellipse(playerX + playerWidth - 10, playerY + playerHeight/2 - 5, 5, 5, 0, 0, Math.PI * 2);
            ctx.fill();
            // Collar
            ctx.fillStyle = "red";
            ctx.fillRect(playerX + playerWidth/2 - 5, playerY + playerHeight/2 + 10, 10, 5);
        }

        // Spawn a new word
        function spawnWord() {
            const isGood = Math.random() > 0.4; // 60% chance of good word
            const text = isGood ? goodWords[Math.floor(Math.random() * goodWords.length)] : badWords[Math.floor(Math.random() * badWords.length)];
            const x = Math.random() * (canvas.width - 100);
            
            fallingWords.push({
                x: x,
                y: -30,
                text: text,
                isGood: isGood,
                width: ctx.measureText(text).width + 20
            });
        }

        // Update and draw words
        function updateAndDrawWords() {
            ctx.font = "bold 20px 'Inter'";
            
            for (let i = fallingWords.length - 1; i >= 0; i--) {
                let word = fallingWords[i];
                word.y += wordSpeed;

                // Draw word background
                ctx.fillStyle = word.isGood ? "#dcfce7" : "#fee2e2";
                ctx.strokeStyle = word.isGood ? "#16a34a" : "#dc2626";
                ctx.lineWidth = 2;
                
                const textWidth = ctx.measureText(word.text).width;
                const boxWidth = textWidth + 20;
                const boxHeight = 30;
                
                ctx.fillRect(word.x, word.y - 20, boxWidth, boxHeight);
                ctx.strokeRect(word.x, word.y - 20, boxWidth, boxHeight);

                // Draw text
                ctx.fillStyle = word.isGood ? "#166534" : "#991b1b";
                ctx.fillText(word.text, word.x + 10, word.y);

                // Collision detection
                if (
                    playerX < word.x + boxWidth &&
                    playerX + playerWidth > word.x &&
                    playerY < word.y + boxHeight &&
                    playerY + playerHeight > word.y - 20
                ) {
                    // Collision!
                    if (word.isGood) {
                        score += 1;
                        scoreDisplay.textContent = `WORDS: ${score}/10`;
                        if (score >= 10) {
                            endGame(true); // Win
                        }
                    } else {
                        endGame(false); // Lose
                    }
                    fallingWords.splice(i, 1); // Remove word
                    continue;
                }

                // Remove if off screen
                if (word.y > canvas.height) {
                    fallingWords.splice(i, 1);
                }
            }
        }

        // Main game loop
        function updateGame() {
            ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear sky
            
            // Draw grass
            ctx.fillStyle = '#4ade80';
            ctx.fillRect(0, canvas.height - 60, canvas.width, 60);

            // Move player
            if (isMovingLeft && playerX > 0) playerX -= 5;
            if (isMovingRight && playerX < canvas.width - playerWidth) playerX += 5;

            drawPlayer();
            updateAndDrawWords();
        }

        // End the game
        function endGame(didWin) {
            clearInterval(gameLoop);
            clearInterval(spawnInterval);
            clearInterval(gameTimerInterval);
            
            if (didWin) {
                modalTitleText.textContent = "You Won!";
                modalBodyText.textContent = "Great job catching all the good words!";
            } else {
                modalTitleText.textContent = "Good Grief!";
                modalBodyText.textContent = `You caught a bad word! Keep trying!`;
            }
            gameOverModal.classList.remove('hidden');
        }

        // Start a new game
        function startGame() {
            // Reset state
            if (gameLoop) clearInterval(gameLoop);
            if (spawnInterval) clearInterval(spawnInterval);
            if (gameTimerInterval) clearInterval(gameTimerInterval);

            resizeCanvas();
            initPlayer();
            fallingWords = [];
            score = 0;
            timeLeft = 60;
            
            scoreDisplay.textContent = `WORDS: 0/10`;
            gameTimerDisplay.textContent = `TIME: 60`;
            gameOverModal.classList.add('hidden');

            // Start intervals
            gameLoop = setInterval(updateGame, 1000 / 60); // 60 FPS
            spawnInterval = setInterval(spawnWord, 1500); // New word every 1.5s
            
            gameTimerInterval = setInterval(() => {
                timeLeft--;
                gameTimerDisplay.textContent = `TIME: ${timeLeft}`;
                if (timeLeft <= 0) {
                    endGame(false); // Lose due to time
                }
            }, 1000);
        }

        // Handle keyboard input
        document.addEventListener('keydown', (e) => {
            if (e.code === 'ArrowLeft') isMovingLeft = true;
            if (e.code === 'ArrowRight') isMovingRight = true;
        });
        
        document.addEventListener('keyup', (e) => {
            if (e.code === 'ArrowLeft') isMovingLeft = false;
            if (e.code === 'ArrowRight') isMovingRight = false;
        });
        
        // Handle mobile button input
        leftBtn.addEventListener('mousedown', () => isMovingLeft = true);
        leftBtn.addEventListener('mouseup', () => isMovingLeft = false);
        leftBtn.addEventListener('touchstart', (e) => { e.preventDefault(); isMovingLeft = true; });
        leftBtn.addEventListener('touchend', (e) => { e.preventDefault(); isMovingLeft = false; });

        rightBtn.addEventListener('mousedown', () => isMovingRight = true);
        rightBtn.addEventListener('mouseup', () => isMovingRight = false);
        rightBtn.addEventListener('touchstart', (e) => { e.preventDefault(); isMovingRight = true; });
        rightBtn.addEventListener('touchend', (e) => { e.preventDefault(); isMovingRight = false; });

        playAgainBtn.addEventListener('click', startGame);

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            renderQuiz();
            window.addEventListener('resize', () => {
                if (gameLoop) {
                    resizeCanvas();
                    initPlayer(); // Recenter player on resize just in case
                }
            });
        });
    </script>
</body>

</html>
