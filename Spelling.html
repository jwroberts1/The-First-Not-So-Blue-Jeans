<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3rd Grade Spelling & Vocab</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Jost:wght@500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f5f3ff; /* Light purple background */
        }

        .header-font {
            font-family: 'Jost', sans-serif;
        }

        /* Multiple Choice Styles */
        .question-option {
            transition: all 0.2s;
            cursor: pointer;
        }
        .question-option:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        .question-option.selected {
            background-color: #ede9fe;
            border-left: 4px solid #7c3aed; /* Indigo-600 */
        }
        .question-option.correct-answer {
            background-color: #dcfce7; /* Green-100 */
            border-left: 4px solid #16a34a; /* Green-600 */
        }
        .question-option.incorrect-answer {
            background-color: #fee2e2; /* Red-100 */
            border-left: 4px solid #ef4444; /* Red-500 */
        }

        /* Spelling Input Styles */
        .spelling-input {
            @apply w-full sm:w-64 p-3 border-2 border-gray-300 rounded-lg text-lg font-medium transition-all duration-200;
        }
        .spelling-input:focus {
            @apply border-indigo-500 ring-2 ring-indigo-200 outline-none;
        }
        .spelling-input.correct-spelling {
            @apply bg-green-50 border-green-500 text-green-800;
        }
        .spelling-input.incorrect-spelling {
            @apply bg-red-50 border-red-500 text-red-800;
        }
        .spelling-input::placeholder {
            @apply text-gray-400 font-normal;
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #fff;
            padding: 2.5rem;
            border-radius: 12px;
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>

<body class="p-4 sm:p-8">
    <!-- Navigation Links -->
    <div class="max-w-4xl mx-auto flex justify-between mb-4 text-lg font-semibold">
        <a href="./index.html" class="text-blue-600 hover:text-blue-800 underline">
            &larr; Go to Reading
        </a>
        <a href="./Math.html" class="text-green-600 hover:text-green-800 underline">
            Go to Math &rarr;
        </a>
    </div>

    <div id="main-content" class="max-w-4xl mx-auto bg-white shadow-2xl rounded-xl p-6 sm:p-10 mb-8 border-4 border-indigo-200">
        <h1 class="text-3xl sm:text-5xl font-extrabold text-center text-indigo-800 mb-4 header-font">
            Spelling & Vocab Mission
        </h1>
        <p class="text-gray-600 text-center mb-8 text-lg">
            Weekly Spelling Practice
        </p>

        <!-- 1. Spelling Word List Section -->
        <div class="mb-10">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 header-font">This Week's Spelling Words</h2>
            <p class="text-gray-600 mb-4">Just the words to practice spelling.</p>
            <div id="spelling-word-list-container" class="grid grid-cols-2 md:grid-cols-3 gap-x-8 gap-y-3">
                <!-- Spelling words will be dynamically inserted here -->
            </div>
        </div>

        <hr class="my-12 border-gray-200">

        <!-- 2. Vocabulary Word List Section -->
        <div class="mb-10">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 header-font">This Week's Vocabulary Words</h2>
            <p class="text-gray-600 mb-4">The words with their definitions.</p>
            <div id="vocab-word-list-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Vocab words and definitions will be dynamically inserted here -->
            </div>
        </div>

        <hr class="my-12 border-gray-200">

        <!-- 3. Vocabulary Match Section -->
        <div id="vocab-quiz-container" class="mb-10">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 header-font">Activity 1: Vocabulary Match</h2>
            <div id="vocab-questions-container" class="space-y-8">
                <!-- Vocab questions will be dynamically inserted here -->
            </div>
            <div class="mt-10 text-center">
                <button id="submitVocabBtn" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-full hover:bg-indigo-700 transition duration-300 shadow-lg">
                    Check Vocab Answers
                </button>
            </div>
            <div id="vocab-results" class="mt-6 p-4 rounded-lg text-center font-bold text-lg hidden">
                <p id="vocabScoreText"></p>
            </div>
        </div>

        <hr class="my-12 border-gray-200">

        <!-- 4. Spelling Quiz Section -->
        <div id="spelling-quiz-container">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 header-font">Activity 2: Spelling Test</h2>
            <p class="text-gray-600 mb-6 text-center">Type the correct spelling for each definition.</p>
            <div id="spelling-questions-container" class="space-y-6">
                <!-- Spelling questions will be dynamically inserted here -->
            </div>
            <div class="mt-10 text-center">
                <button id="submitSpellingBtn" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-full hover:bg-indigo-700 transition duration-300 shadow-lg">
                    Check Spelling
                </button>
            </div>
            <div id="spelling-results" class="mt-6 p-4 rounded-lg text-center font-bold text-lg hidden">
                <p id="spellingScoreText"></p>
            </div>
        </div>

        <!-- 5. Reward Section -->
        <div id="reward-message" class="hidden mt-12 p-8 bg-yellow-50 border-4 border-yellow-300 rounded-2xl text-center">
            <h2 class="text-4xl font-bold text-yellow-800 mb-4 header-font">Supa-Buddy!</h2>
            <p class="text-xl text-yellow-700 font-semibold">You passed both quizzes! Great job focusing and DOING good!</p>
        </div>

    </div>

    <!-- Generic Modal for Messages -->
    <div id="messageModal" class="modal-overlay hidden">
        <div class="modal-content text-center">
            <p id="messageText" class="text-gray-800 text-lg sm:text-xl mb-6 font-semibold"></p>
            <button id="closeModalBtn" class="bg-indigo-500 text-white font-bold py-2 px-6 rounded-full hover:bg-indigo-600 transition duration-300">
                OK
            </button>
        </div>
    </div>


    <script>
        // --- SPELLING WORD DATA ---
        // TO-DO: Add your son's weekly spelling words here.
        // The "definition" is used as the prompt in the spelling test.
        const spellingWords = [
            { word: "Jump", definition: "To leap." },
            { word: "Jet", definition: "A plane." },
            { word: "Jog", definition: "To run for exercies" },
            { word: "Juice", definition: "Drinks from fruits" },
            { word: "Jeep", definition: "Daddys Car" },
            { word: "Heart", definition: "An organ that pumps blood" },
            { word: "Hat", definition: "Something you wear on your head" },
            { word: "Horn", definition: "An instrument" },
            { word: "House", definition: "A place to live" },
            { word: "Horse", definition: "Large 4 legged mammal that people ride" },
            { word: "Chimney", definition: "What Santa comes down" },
            { word: "Cherry", definition: "A small red berry" },
            { word: "Chin", definition: "My dads beard covers his" },
            { word: "Chick", definition: "A baby chicken" },
            { word: "Cheese", definition: "Side of these is the worst :)" }
            
            // --- Add more spelling words below like this ---
            // { word: "believe", definition: "To accept that something is true." },
        ];

        // --- VOCABULARY WORD DATA ---
        // TO-DO: Add your son's weekly vocabulary words here.
        // "wrong" options are used in the multiple-choice quiz.
        const vocabWords = [
            { word: "arrived", definition: "Got to where you were going", wrong: ["To give something away", "To run fast"] },
            { word: "immigrated", definition: "To to have come to a new country to live.", wrong: ["To join things together", "To build a house"] },
            { word: "inspected", definition: "Looking at something closely and carefully.", wrong: ["To look quickly for something", "To run around"] },
            { word: "moment", definition: "A very short amount of time.", wrong: ["Something that takes a really long time", "Lord Momonosuke"] },
            { word: "opportunity", definition: "A chance for good things to happen", wrong: ["A Chance for bad things to happen", "Bad guys in games"] },
            { word: "photographs", definition: "Pictures taken with a camera.", wrong: ["Pictures painted by an artist", "An awful nickelback song"] },
            { word: "valuable", definition: "worth a lot of money", wrong: ["Something you don't care about", "A menu item at McDonalds"] },
            { word: "whispered", definition: "Spoken in a very quiet voice.", wrong: ["Speaking loudly", "To talk to someone in one room from another"] }
            // --- Add more vocab words below like this ---
            // { word: "science", definition: "The study of the natural world.", wrong: ["A history lesson", "A spelling test"] },
        ];

        // --- GLOBAL STATE ---
        let vocabPassed = false;
        let spellingPassed = false;

        // --- DOM Elements ---
        const mainContent = document.getElementById('main-content');
        const spellingWordListContainer = document.getElementById('spelling-word-list-container');
        const vocabWordListContainer = document.getElementById('vocab-word-list-container');
        const vocabQuestionsContainer = document.getElementById('vocab-questions-container');
        const spellingQuestionsContainer = document.getElementById('spelling-questions-container');
        
        const submitVocabBtn = document.getElementById('submitVocabBtn');
        const vocabResults = document.getElementById('vocab-results');
        const vocabScoreText = document.getElementById('vocabScoreText');
        
        const submitSpellingBtn = document.getElementById('submitSpellingBtn');
        const spellingResults = document.getElementById('spelling-results');
        const spellingScoreText = document.getElementById('spellingScoreText');
        
        const rewardMessage = document.getElementById('reward-message');
        
        const messageModal = document.getElementById('messageModal');
        const messageText = document.getElementById('messageText');
        const closeModalBtn = document.getElementById('closeModalBtn');

        // --- Helper: Shuffle Array ---
        function shuffleArray(array) {
            let newArr = [...array];
            for (let i = newArr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArr[i], newArr[j]] = [newArr[j], newArr[i]];
            }
            return newArr;
        }

        // --- 1. RENDER SPELLING LIST ---
        function renderSpellingList() {
            spellingWordListContainer.innerHTML = '';
            if (spellingWords.length === 0) {
                 spellingWordListContainer.innerHTML = `<p class="text-gray-500 italic">No spelling words added for this week.</p>`;
                 return;
            }
            spellingWords.forEach(wordData => {
                const div = document.createElement('div');
                // Simple list item for just the word
                div.className = 'p-2 bg-gray-50 rounded-md border border-gray-200';
                div.innerHTML = `<p class="text-lg font-medium text-indigo-700 text-center">${wordData.word}</p>`;
                spellingWordListContainer.appendChild(div);
            });
        }

        // --- 2. RENDER VOCAB LIST ---
        function renderVocabList() {
            vocabWordListContainer.innerHTML = '';
            if (vocabWords.length === 0) {
                 vocabWordListContainer.innerHTML = `<p class="text-gray-500 italic">No vocabulary words added for this week.</p>`;
                 return;
            }
            vocabWords.forEach(wordData => {
                const div = document.createElement('div');
                // This is the original card with word + definition
                div.className = 'p-4 bg-gray-50 rounded-lg border border-gray-200';
                div.innerHTML = `
                    <h3 class="text-xl font-bold text-indigo-700">${wordData.word}</h3>
                    <p class="text-gray-600">${wordData.definition}</p>
                `;
                vocabWordListContainer.appendChild(div);
            });
        }

        // --- 3. VOCAB QUIZ FUNCTIONS ---
        function renderVocabQuiz() {
            vocabQuestionsContainer.innerHTML = '';
            vocabResults.classList.add('hidden');
            vocabPassed = false;
            checkReward();
            
            if (vocabWords.length === 0) {
                document.getElementById('vocab-quiz-container').innerHTML = '<h2 class="text-2xl font-bold text-gray-800 mb-6 header-font">Activity 1: Vocabulary Match</h2><p class="text-gray-500 italic text-center">No vocabulary words to quiz.</p>';
                vocabPassed = true; // Nothing to test, so they pass.
                return;
            }

            const shuffledWords = shuffleArray(vocabWords);

            shuffledWords.forEach((wordData, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.id = `vocab-q-${index}`;
                questionDiv.className = 'question p-6 rounded-xl shadow-md bg-white border border-indigo-100';

                questionDiv.innerHTML = `<p class="font-semibold text-lg text-gray-800 mb-4">${index + 1}. What does the word "<strong>${wordData.word}</strong>" mean?</p>`;
                
                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'space-y-3 text-sm sm:text-base';
                questionDiv.appendChild(optionsDiv);

                // Create and shuffle options
                const options = [
                    { text: wordData.definition, correct: true },
                    { text: wordData.wrong[0], correct: false },
                    { text: wordData.wrong[1], correct: false }
                ];
                const shuffledOptions = shuffleArray(options);

                shuffledOptions.forEach(option => {
                    const label = document.createElement('label');
                    label.className = 'question-option block bg-gray-50 p-3 rounded-lg border border-gray-200';
                    label.innerHTML = `
                        <input type="radio" name="vocab-q-${index}" value="${option.correct}" class="mr-3 accent-indigo-600">
                        <span>${option.text}</span>
                    `;
                    label.addEventListener('click', () => {
                        document.querySelectorAll(`input[name="vocab-q-${index}"]`).forEach(radio => {
                            radio.parentElement.classList.remove('selected');
                        });
                        label.classList.add('selected');
                        label.querySelector('input').checked = true; 
                    });
                    optionsDiv.appendChild(label);
                });
                vocabQuestionsContainer.appendChild(questionDiv);
            });
        }

        submitVocabBtn.addEventListener('click', () => {
            let score = 0;
            let allAnswered = true;
            const totalQuestions = vocabWords.length;

            if (totalQuestions === 0) return; // Don't do anything if no words

            vocabQuestionsContainer.querySelectorAll('.question').forEach((questionDiv, index) => {
                const selected = questionDiv.querySelector('input[type="radio"]:checked');
                
                if (!selected) {
                    allAnswered = false;
                    return;
                }

                const isCorrect = selected.value === 'true';
                const labels = questionDiv.querySelectorAll('.question-option');

                labels.forEach(label => {
                    label.classList.remove('selected');
                    const isCorrectAnswer = label.querySelector('input').value === 'true';
                    if (isCorrectAnswer) {
                        label.classList.add('correct-answer');
                    }
                });

                if (isCorrect) {
                    score++;
                } else {
                    selected.parentElement.classList.add('incorrect-answer');
                }
            });

            if (!allAnswered) {
                showBasicMessage("Please answer all vocabulary questions first!");
                return;
            }

            const percentage = (score / totalQuestions) * 100;
            vocabScoreText.textContent = `You scored ${score} out of ${totalQuestions} (${percentage.toFixed(0)}%).`;
            vocabResults.classList.remove('hidden');

            if (score === totalQuestions) {
                vocabResults.classList.add('bg-green-100', 'text-green-800');
                vocabResults.classList.remove('bg-red-100', 'text-red-700');
                vocabPassed = true;
            } else {
                vocabResults.classList.add('bg-red-100', 'text-red-700');
                vocabResults.classList.remove('bg-green-100', 'text-green-800');
                vocabPassed = false;
            }
            checkReward();
        });

        // --- 4. SPELLING QUIZ FUNCTIONS ---
        function renderSpellingQuiz() {
            spellingQuestionsContainer.innerHTML = '';
            spellingResults.classList.add('hidden');
            spellingPassed = false;
            checkReward();

            if (spellingWords.length === 0) {
                document.getElementById('spelling-quiz-container').innerHTML = '<h2 class="text-2xl font-bold text-gray-800 mb-6 header-font">Activity 2: Spelling Test</h2><p class="text-gray-500 italic text-center">No spelling words to quiz.</p>';
                spellingPassed = true; // Nothing to test, so they pass.
                return;
            }

            const shuffledWords = shuffleArray(spellingWords);

            shuffledWords.forEach((wordData, index) => {
                const div = document.createElement('div');
                div.className = 'flex flex-col sm:flex-row sm:items-center gap-4 p-4 bg-white rounded-lg shadow-sm border border-indigo-100';
                div.innerHTML = `
                    <div class="flex-1">
                        <p class="font-semibold text-gray-700">${index + 1}. ${wordData.definition}</p>
                    </div>
                    <input type="text" 
                           class="spelling-input" 
                           id="spelling-q-${index}" 
                           data-correct="${wordData.word}"
                           placeholder="Type spelling here..."
                           autocapitalize="none" 
                           autocomplete="off" 
                           autocorrect="off" 
                           spellcheck="false">
                `;
                spellingQuestionsContainer.appendChild(div);
            });
        }

        submitSpellingBtn.addEventListener('click', () => {
            let score = 0;
            const totalQuestions = spellingWords.length;

            if (totalQuestions === 0) return; // Don't do anything if no words
            
            const inputs = spellingQuestionsContainer.querySelectorAll('.spelling-input');

            inputs.forEach(input => {
                const correctAnswer = input.dataset.correct.toLowerCase();
                const userAnswer = input.value.trim().toLowerCase();
                
                input.classList.remove('correct-spelling', 'incorrect-spelling');

                if (userAnswer === correctAnswer) {
                    score++;
                    input.classList.add('correct-spelling');
                } else {
                    input.classList.add('incorrect-spelling');
                }
            });

            const percentage = (score / totalQuestions) * 100;
            spellingScoreText.textContent = `You scored ${score} out of ${totalQuestions} (${percentage.toFixed(0)}%).`;
            spellingResults.classList.remove('hidden');

            if (score === totalQuestions) {
                spellingResults.classList.add('bg-green-100', 'text-green-800');
                spellingResults.classList.remove('bg-red-100', 'text-red-700');
                spellingPassed = true;
            } else {
                spellingResults.classList.add('bg-red-100', 'text-red-700');
                spellingResults.classList.remove('bg-green-100', 'text-green-800');
                spellingPassed = false;
            }
            checkReward();
        });


        // --- 5. REWARD & MODAL FUNCTIONS ---
        function checkReward() {
            // Only show reward if *both* quizzes are passed.
            // If a quiz has 0 words, it's considered "passed" by default.
            if (vocabPassed && spellingPassed) {
                rewardMessage.classList.remove('hidden');
            } else {
                rewardMessage.classList.add('hidden');
            }
        }

        function showBasicMessage(message) {
            messageText.textContent = message;
            messageModal.classList.remove('hidden');
        }
        closeModalBtn.addEventListener('click', () => {
            messageModal.classList.add('hidden');
        });

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            // Safety check: Show a message if *both* lists are empty
            if (spellingWords.length === 0 && vocabWords.length === 0) {
                mainContent.innerHTML = `
                    <h1 class="text-3xl sm:text-5xl font-extrabold text-center text-indigo-800 mb-4 header-font">
                        Spelling & Vocab Mission
                    </h1>
                    <p class="text-gray-600 text-center mb-8 text-lg p-4">
                        This page is ready to go!
                    </p>
                    <div class="bg-indigo-50 p-6 rounded-lg border border-indigo-200">
                        <h2 class="text-xl font-bold text-indigo-700 mb-2">How to use this page:</h2>
                        <p class="text-gray-700">Please open the \`Spelling.html\` file, find the \`spellingWords\` and \`vocabWords\` lists in the \`<script>\` section at the bottom, and add your son's words.</p>
                    </div>
                `;
                return; // Stop running the rest of the code
            }
            
            renderSpellingList();
            renderVocabList();
            renderVocabQuiz();
            renderSpellingQuiz();
        });
    </script>
</body>
</html>

